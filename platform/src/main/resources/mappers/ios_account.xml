<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="iosAccountMapper">

    <resultMap id="account" type="com.tinybee.common.enitiy.Account">
        <id column="id" property="id"/>
        <result column="account" property="account"/>
        <result column="token" property="token"/>
        <result column="userId" property="userId"/>
        <result column="createTime" property="createTime"/>
        <result column="updateTime" property="updateTime"/>
    </resultMap>

    <select id="getAccountByAccount" resultMap="account" parameterType="java.util.Map">
        select *
        from tinybee.ios_account
        where account = #{account}
        limit 1;
    </select>

    <select id="getAccountByUserId" resultMap="account" parameterType="java.util.Map">
        select *
        from tinybee.ios_account
        where userId = #{userId}
        limit 1;
    </select>
    
    <insert id="createAccount" parameterType="com.tinybee.common.enitiy.Account">
        insert into tinybee.ios_account
        (
            account, token, userId, createTime, updateTime
        )
        values
        (
            #{account}, #{token}, #{userId}, #{createTime}, #{updateTime}
        );
    </insert>

    <update id="attachUserId" parameterType="java.util.Map">
        update tinybee.ios_account
        set userId = #{userId}
        where id = #{id};
    </update>
    
</mapper>